<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>The Flowers Are Still Standing</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="author" content="Jonathan Pearlin" />
        <meta name="keywords" content="" />
        <meta name="generator" content="JBake" />

        <!-- Le styles -->
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
        <link href="/blog/css/asciidoctor.css" rel="stylesheet">
        <link href="/blog/css/base.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
		<link href='/blog/css/octicons.min.css' rel='stylesheet' type='text/css'>

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
              <script src="/blog/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Fav and touch icons -->
        <!--
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png" />
        -->
        <link rel="shortcut icon" href="/blog/favicon.ico" />
    </head>
    <body>
        <div id="wrap">
            <!-- Fixed navbar -->
            <div class="navbar navbar-default navbar-fixed-top" role="navigation">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/blog/index.html">Jonathan Pearlin's Blog</a>
                    </div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li><a href="/blog/about.html">About</a></li>
                            <li><a href="/blog/resume.html">Résumé</a></li>
                            <li><a href="/blog/friends.html">Friends</a></li>
                            <li class="dropdown">
                                <a data-toggle="dropdown" href="#">Tags<b class="caret"></b></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="/blog/tags/gradle.html">Gradle</a></li>
                                    <li><a href="/blog/tags/grails.html">Grails</a></li>
                                    <li><a href="/blog/tags/groovy.html">Groovy</a></li>
                                    <li><a href="/blog/tags/java.html">Java</a></li>
                                    <li><a href="/blog/tags/maven.html">Maven</a></li>
                                    <li><a href="/blog/tags/spring.html">Spring</a></li>
                                    <li><a href="/blog/tags/zookeeper.html">ZooKeeper</a></li>
                                </ul>
                            </li>
                            <li><a href="/blog/feed.xml">Feed</a></li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="https://github.com/jdpgrailsdev" target="_blank"><i class="fa fa-github"></i></a></li>
                            <li><a href="http://www.linkedin.com/pub/jonathan-pearlin/4/946/9a0" style="text-decoration:none;" target="_blank"><i class="fa fa-linkedin-square"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
			<div id="activity" class="pull-left">
	            <div class="panel panel-primary">
	                  <!-- Default panel contents -->
	                  <div class="panel-heading"><a target="_blank" href="http://github.com/jdpgrailsdev?tab=activity"><i class="fa fa-github"></i> My Recent GitHub Activity</a></div>
					  <div class="panel-body">
					      <i class='icon-spinner icon-spin icon-large'></i> Loading...
					  </div>
	                  <!-- List group -->
                      <ul class="list-group">
	                  </ul>
	            </div>
			</div>
            <div class="container">
                <div class="page-header">
                    <h1>The Flowers Are Still Standing</h1>
                </div>

                   <a href="/blog/2014/05/27/grails_maven_jdk_profile.html"><h1>Grails, Maven and JDK-based Profile Activation</h1></a>
                   <p>27 May 2014</p>
                <p><em>Tags: </em>
                <a href="/blog/tags/grails.html">grails</a>
        
                <a href="/blog/tags/maven.html">maven</a>
        
                <a href="/blog/tags/java.html">java</a>
        </p>

                <div class="g-plusone" data-size="medium" data-href="http://jdpgrailsdev.github.io/blog/2014/05/27/grails_maven_jdk_profile.html"></div>
                <script type="IN/Share" data-url="http://jdpgrailsdev.github.io/blog/2014/05/27/grails_maven_jdk_profile.html" data-counter="right"></script>
                <div class="fb-like" data-href="http://jdpgrailsdev.github.io/blog/2014/05/27/grails_maven_jdk_profile.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

                   <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Recently, I have been spending my time converting <a href="http://grails.org" target="_blank">Grails</a> applications to use <a href="http://maven.apache.org/" target="_blank">Maven</a> POM files for dependency management.  For the last couple releases, <a href="http://grails.org" target="_blank">Grails</a> has included the ability to
rely on a POM file for dependencies, instead of declaring the repositories and dependencies directly in your <code>grails-app/conf/BuildConfig.groovy</code>.  This works exactly as expected&#8201;&#8212;&#8201;that is <a href="http://grails.org" target="_blank">Grails</a>
retrieves the dependency declarations from the POM file and uses them to build/run the application when using the <a href="http://grails.org" target="_blank">Grails</a> CLI.  However, there is a bug in the way <a href="http://grails.org" target="_blank">Grails</a> dynamically validates and
uses the POM file.  I came across this issue when attempting to use the JDK version-based profile activation that I discussed in <a href="http://jonathanpearlin.com/blog/2014/04/03/maven_java8_javadoc.html" target="_blank">a previous post</a>.
When a JDK-activated profile is present in the POM file used by <a href="http://grails.org" target="_blank">Grails</a>, the application will report the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code>[ERROR] Failed to determine Java version for profile java8 @ &lt;GAV of the POM file containing the profile&gt;
        at org.apache.maven.model.building.DefaultModelProblemCollector.newModelBuildingException(DefaultModelProblemCollector.java:195)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:416)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:368)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:359)
        at grails.util.BuildSettings.doResolve(BuildSettings.groovy:513)
        at grails.util.BuildSettings.doResolve(BuildSettings.groovy)
        at grails.util.BuildSettings$_getDefaultBuildDependencies_closure17.doCall(BuildSettings.groovy:774)
        at grails.util.BuildSettings$_getDefaultBuildDependencies_closure17.doCall(BuildSettings.groovy)
        at grails.util.BuildSettings.getDefaultBuildDependencies(BuildSettings.groovy:768)
        at grails.util.BuildSettings.getBuildDependencies(BuildSettings.groovy:673)</code></pre>
</div>
</div>
<div class="paragraph">
<p>At first, I was confused.  This same error does not happen if you use the <a href="https://github.com/grails/grails-maven" target="_blank">Grails Maven Plugin</a> to build/run your application&#8201;&#8212;&#8201;it only happens when using the
<a href="http://grails.org" target="_blank">Grails</a> CLI.  I also know that <a href="http://grails.org" target="_blank">Grails</a> &#8656; 2.3.X does not support Java 8, so maybe it was related to that?  After looking at the <a href="http://grails.org" target="_blank">Grails</a> source (and the stacktrace), I found some interesting code in the
<a href="https://github.com/apache/maven/blob/maven-3.1.1/maven-model-builder/src/main/java/org/apache/maven/model/profile/activation/JdkVersionProfileActivator.java" target="_blank">JdkVersionProfileActivator</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint java language-java"><code>String version = context.getSystemProperties().get( "java.version" );

if ( version == null || version.length() &lt;= 0 )
{
    problems.add( new ModelProblemCollectorRequest( Severity.ERROR, Version.BASE )
            .setMessage( "Failed to determine Java version for profile " + profile.getId() )
            .setLocation( activation.getLocation( "jdk" ) ) );
    return false;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="http://maven.apache.org/" target="_blank">Maven</a> code checks the <code>java.version</code> system property to determine which version of the JDK is in use to see if it matches up with the requested profile.  After some additional digging in the <a href="http://grails.org" target="_blank">Grails</a> source, I discovered that the
<a href="https://github.com/grails/grails-core/blob/master/grails-aether/src/main/groovy/org/codehaus/groovy/grails/resolve/maven/aether/AetherDependencyManager.groovy" target="_blank">AetherDependencyManager</a> programmatically builds a
<a href="http://maven.apache.org/" target="_blank">Maven</a> <code>DefaultModelBuildingRequest</code>, but does <strong>not</strong> pass the system properties from the JVM to the request.  Therefore, when the <code>JdkVersionProfileActivator</code> attempts to look at the value of the <code>java.version</code> system property, there
are no properties to inspect!  I made a quick change to the <code>AetherDependencyManager</code> class to add the setting of the system properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>final modelRequest = new DefaultModelBuildingRequest()
modelRequest.setPomFile(pomFile)
modelRequest.setSystemProperties(System.properties)
modelRequest.setModelResolver(new GrailsModelResolver(repositorySystem, session, repositories))</code></pre>
</div>
</div>
<div class="paragraph">
<p>After re-testing with the modified code, the <a href="http://grails.org" target="_blank">Grails</a> happily accepted the JDK-based <a href="http://maven.apache.org/" target="_blank">Maven</a> profile without exception.  I have created a <a href="https://github.com/grails/grails-core/pull/492" target="_blank">pull request</a>, which has been merged into the
2.4.x version of <a href="http://grails.org" target="_blank">Grails</a>.  If you need access to this fix earlier, I would suggest creating a branch off of the tagged version of <a href="http://grails.org" target="_blank">Grails</a> that you are currently using and cherry-picking the commit that contains the change.  You can then build
the <code>grails-aether</code> JAR and drop it into the <code>dist</code> folder of your <a href="http://grails.org" target="_blank">Grails</a> installation to consume the change.</p>
</div>
</div>
</div></p>
                <p><a href="/blog/2014/05/27/grails_maven_jdk_profile.html#disqus_thread">Comments</a></p>
                   <a href="/blog/2014/05/20/grails_maven_coverage.html"><h1>Grails, Maven, Cobertura and Java 7</h1></a>
                   <p>20 May 2014</p>
                <p><em>Tags: </em>
                <a href="/blog/tags/grails.html">grails</a>
        
                <a href="/blog/tags/maven.html">maven</a>
        
                <a href="/blog/tags/java.html">java</a>
        </p>

                <div class="g-plusone" data-size="medium" data-href="http://jdpgrailsdev.github.io/blog/2014/05/20/grails_maven_coverage.html"></div>
                <script type="IN/Share" data-url="http://jdpgrailsdev.github.io/blog/2014/05/20/grails_maven_coverage.html" data-counter="right"></script>
                <div class="fb-like" data-href="http://jdpgrailsdev.github.io/blog/2014/05/20/grails_maven_coverage.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

                   <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When working on upgrading a few <a href="http://grails.org" target="_blank">Grails</a> plugins to 2.3.x and converting them to be built using the <a href="http://grails.org/doc/latest/guide/commandLine.html#4.5%20Ant%20and%20Maven" target="_blank">Grails Maven Plugin</a>, I ran into a weird issue when
executing unit tests with the <a href="https://github.com/beckje01/grails-code-coverage" target="_blank">Grails Code Coverage Plugin</a> installed and enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code>Error |
Compilation error compiling [unit] tests: Expecting a stackmap frame at branch target 97
Exception Details:
  Location:
    com/test/compiler/injection/DeletableASTTransformation.visit([Lorg/codehaus/groovy/ast/ASTNode;Lorg/codehaus/groovy/control/SourceUnit;)V @62: ifeq
  Reason:
    Expected stackmap frame at this location.
  Bytecode:
    0000000: 033e 11ff ff36 0412 1e11 0023 b800 242b
    0000010: 0432 c000 343a 0512 1e11 0024 b800 242b
    0000020: 0332 c000 363a 0612 1e11 0025 b800 242b
    0000030: 0332 c100 3611 0025 3e11 0000 3604 9900
    0000040: 2312 1e1d 1504 04b8 003a 11ff ff36 042b
    0000050: 0432 c100 3411 0025 3e11 0001 3604 9a00
    0000060: 481d 1100 25a0 001c 1504 1100 01a0 0014
    0000070: 121e 1d15 0404 b800 3a11 ffff 3604 a700
    0000080: 1615 049b 0011 121e 1d15 0403 b800 3a11
    0000090: ffff 3604 121e 1100 26b8 0024 bb00 3c59
    00000a0: 123e b700 41bf 1504 9b00 1112 1e1d 1504
    00000b0: 03b8 003a 11ff ff36 0412 1e11 0029 b800
    00000c0: 24b2 0043 1906 b600 47b6 004d 1100 293e
    00000d0: 1100 0036 049a 0012 121e 1d15 0404 b800
    00000e0: 3a11 ffff 3604 b115 049b 0011 121e 1d15
    00000f0: 0403 b800 3a11 ffff 3604 121e 1100 2bb8
    0000100: 0024 1905 c100 4f11 002b 3e11 0000 3604
    0000110: 9900 ea1d 1100 2ba0 0019 1504 1100 00a0
    0000120: 0011 121e 1d15 0404 b800 3a11 ffff 3604
    0000130: 121e 1100 2cb8 0024 1905 c000 4f3a 0712
    0000140: 1e11 002d b800 2419 07b6 0052 1254 b800
    0000150: 5a11 002d 3e11 0000 3604 9900 331d 1100
    0000160: 2da0 0019 1504 1100 00a0 0011 121e 1d15
    0000170: 0404 b800 3a11 ffff 3604 121e 1100 2eb8
    0000180: 0024 2a19 0719 06b7 005e a700 6515 049b
    0000190: 0011 121e 1d15 0403 b800 3a11 ffff 3604
    00001a0: 121e 1100 30b8 0024 bb00 3c59 bb00 6059
    00001b0: b700 6112 63b6 0067 1905 b600 6ab6 006d
    00001c0: 126f b600 67b2 0071 b600 6712 73b6 0067
    00001d0: 1907 121e 1100 31b8 0024 b600 52b6 0077
    00001e0: b600 6712 79b6 0067 b600 7cb7 0041 bf12
    00001f0: 1e11 0033 b800 24a7 005d 1504 9b00 1112
    0000200: 1e1d 1504 03b8 003a 11ff ff36 0412 1e11
    0000210: 0034 b800 24bb 003c 59bb 0060 59b7 0061
    0000220: 1263 b600 6719 05b6 006a b600 6d12 6fb6
    0000230: 0067 b200 71b6 0067 127e b600 6719 0512
    0000240: 1e11 0035 b800 24b6 0082 b600 6db6 007c
    0000250: b700 41bf 121e 1100 37b8 0024 b1
  Stackmap Table:
    append_frame(@156,Object[#52],Object[#54])
    same_frame(@193)
    same_frame_extended(@258)
    append_frame(@424,Object[#79])
    chop_frame(@503,1)
    same_frame(@533)
    same_frame_extended(@604)

    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at _GrailsTest$_run_closure1.doCall(_GrailsTest.groovy:102)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
    at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
    at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at TestApp$_run_closure1.doCall(TestApp.groovy:32)
    at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
    at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
    at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
    at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
    at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
    at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
    at gant.Gant.withBuildListeners(Gant.groovy:427)
    at gant.Gant.this$2$withBuildListeners(Gant.groovy)
    at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
    at gant.Gant.dispatch(Gant.groovy:415)
    at gant.Gant.this$2$dispatch(Gant.groovy)
    at gant.Gant.invokeMethod(Gant.groovy)
    at gant.Gant.executeTargets(Gant.groovy:591)
    at gant.Gant.executeTargets(Gant.groovy:590)
    at org.grails.launcher.GrailsLauncher.launch(GrailsLauncher.java:144)
    at org.grails.maven.plugin.tools.ForkedGrailsRuntime.main(ForkedGrailsRuntime.java:168)

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 59.895 s
[INFO] Finished at: 2014-05-05T07:49:39-05:00
[INFO] Final Memory: 17M/75M</code></pre>
</div>
</div>
<div class="paragraph">
<p>I should point out that the same exact unit tests (without any modifications) passed, even with instrumentation for the code coverage calculation, prior to upgrading from <a href="http://grails.org" target="_blank">Grails</a> 2.0.x to 2.3.x.  Could this be one of those subtle
<a href="http://groovy.codehaus.org" target="_blank">Groovy</a> low-level changes that causes code that once ran fine to all of a sudden be incorrect?  After doing some searching on the internets, I discovered that Java 7 introduced much stricter verification than previous Java versions.
As I was using Java 7 with <a href="http://grails.org" target="_blank">Grails</a> 2.0.x, my guess is that something in the underlying <a href="http://groovy.codehaus.org" target="_blank">Groovy</a> code in the updated version of <a href="http://grails.org" target="_blank">Grails</a> does not contain a valid stack map (in Java 7&#8217;s eyes) for the method(s) in question.  Luckily, the verifier can be
disabled until the issue is resolved by the framework.  The <code>-Xverify:none</code> JVM argument can be used to tell the Java 7 verifier not to do its thing.  In order to tell the <a href="http://grails.org/doc/latest/guide/commandLine.html#4.5%20Ant%20and%20Maven" target="_blank">Grails Maven Plugin</a>
to pass this JVM argument to the forked <a href="http://grails.org" target="_blank">Grails</a> process, I had to make the following tweak to my Maven POM file:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="prettyprint xml language-xml"><code>    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.grails&lt;/groupId&gt;
                &lt;artifactId&gt;grails-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${grails.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;fork&gt;true&lt;/fork&gt;
                    &lt;forkedVmArgs&gt;
                        &lt;!-- Disable verifier to avoid issues with Java 7 verifier and code
                            instrumentation --&gt;
                        &lt;forkedVmArg&gt;-Xverify:none&lt;/forkedVmArg&gt;
                    &lt;/forkedVmArgs&gt;
                    &lt;nonInteractive&gt;true&lt;/nonInteractive&gt;
                    &lt;showStacktrace&gt;true&lt;/showStacktrace&gt;
                    &lt;pluginsDir&gt;${project.build.directory}/plugins&lt;/pluginsDir&gt;
                &lt;/configuration&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>After add the argument and re-running the tests, everything passed as expected.  I am still not sure if the problem lies with <a href="http://grails.org" target="_blank">Grails</a>, <a href="http://groovy.codehaus.org" target="_blank">Groovy</a> or the instrumentation provided by the <a href="https://github.com/beckje01/grails-code-coverage" target="_blank">Grails Code Coverage Plugin</a> or
some combination of all of those.  I will continue to keep an eye out for updates that appear to affect this issue in the hopes that the verifier can be re-enabled in the future.</p>
</div>
</div>
</div></p>
                <p><a href="/blog/2014/05/20/grails_maven_coverage.html#disqus_thread">Comments</a></p>
                   <a href="/blog/2014/05/13/gradle_update_deps.html"><h1>Automatically Update Dependencies in Gradle Project</h1></a>
                   <p>13 May 2014</p>
                <p><em>Tags: </em>
                <a href="/blog/tags/gradle.html">gradle</a>
        </p>

                <div class="g-plusone" data-size="medium" data-href="http://jdpgrailsdev.github.io/blog/2014/05/13/gradle_update_deps.html"></div>
                <script type="IN/Share" data-url="http://jdpgrailsdev.github.io/blog/2014/05/13/gradle_update_deps.html" data-counter="right"></script>
                <div class="fb-like" data-href="http://jdpgrailsdev.github.io/blog/2014/05/13/gradle_update_deps.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

                   <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>One feature that we use a lot that appears to be missing from <a href="http://gradle.org" target="_blank">Gradle</a> is the ability to update all dependencies of a specific group ID to their latest release version.  In <a href="http://maven.apache.org/" target="_blank">Maven</a>, this can
be done through the <code>use-latest-versions</code> goal of the <a href="http://mojo.codehaus.org/versions-maven-plugin/" target="_blank">Maven Versions Plugin</a>.  There is what appears to be a <a href="https://github.com/ben-manes/gradle-versions-plugin" target="_blank">port</a> of the
<a href="http://mojo.codehaus.org/versions-maven-plugin/" target="_blank">Maven Versions Plugin</a> to a <a href="http://gradle.org" target="_blank">Gradle</a> plugin, but it only support generating a report of what is out of date and does not actually support updating the project itself.  That being said, you actually
don&#8217;t need to create a wrapper over the <a href="http://mojo.codehaus.org/versions-maven-plugin/" target="_blank">Maven Versions Plugin</a>:  you can actually achieve the same functionality with a few lines of <a href="http://groovy.codehaus.org" target="_blank">Groovy</a> code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>void updateDependencies(String groupId) {
    def dependencies = project.configurations.collectMany { it.allDependencies }.findAll { it.group == groupId}
    dependencies?.each { Dependency dep -&gt;
        def resolvedConfiguration = project.configurations
                    .detachedConfiguration(project.dependencies.create("${dep.group}:${dep.name}:latest.release")).getResolvedConfiguration()
        def latestVersion = resolvedConfiguration.getFirstLevelModuleDependencies().find { it.getModuleName() == dep.name }?.getModuleVersion()
        if(latestVersion &amp;&amp; latestVersion != dep.version) {
            project.ant.replaceregexp(file: project.file('build.gradle'), match: "${dep.group}:${dep.name}:${dep.version}",
                                        replace: "${dep.group}:${dep.name}:${latestVersion}")
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, a group ID value is used to filter the project&#8217;s dependencies down to the list that are candidates for updates.  From that list, a new "detached configuration" is created for each, with the version set to use
the <code>latest.release</code> placeholder.  The dependency is resolved using the <code>getResolvedConfiguration()</code> method, which returns a configuration that holds the dependency with its latest release version.  If a match is found and the
new version number is not the same as the original candidate dependency&#8217;s version number, then the code makes use of the <code>replaceregexp</code> method on the project&#8217;s Ant object to update the dependency in the <code>build.gradle</code> file itself.
This method could be modified to be a lot more modular.  Such changes could including taking in the entire GAV (group ID, artifact ID, target version number, etc) or taking in an optional parameter for the supported latest version
constants with a meaningful default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>void updateDependencies(String groupId, String targetVersion='latest.release') {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would allow for the use of other constants that are supported by <a href="http://gradle.org" target="_blank">Gradle</a>, such as <code>latest.integration</code> (it could also be extracted to an enumeration to restrict the values that could be provided).  Finally, one other missing piece
that I hope to implement soon is the ability to opt in or out of major version updates (this is something that the <a href="http://mojo.codehaus.org/versions-maven-plugin/" target="_blank">Maven Versions Plugin</a> supports).  This will require using something like
<a href="https://github.com/akutz/version-maven-plugin/blob/master/src/main/java/com/lostcreations/mojos/version/Version.java" target="_blank">Version.java</a> to parse the version number for comparison.  All of this code can be put into a <a href="http://gradle.org" target="_blank">Gradle</a> task
and even into a separate plugin to share between projects!</p>
</div>
</div>
</div></p>
                <p><a href="/blog/2014/05/13/gradle_update_deps.html#disqus_thread">Comments</a></p>
                   <a href="/blog/2014/05/06/github_activity_menu.html"><h1>Add a custom GitHub activity stream to your blog</h1></a>
                   <p>06 May 2014</p>
                <p><em>Tags: </em>
                <a href="/blog/tags/github.html">github</a>
        
                <a href="/blog/tags/jquery.html">jquery</a>
        
                <a href="/blog/tags/bootstrap.html">bootstrap</a>
        
                <a href="/blog/tags/blog.html">blog</a>
        </p>

                <div class="g-plusone" data-size="medium" data-href="http://jdpgrailsdev.github.io/blog/2014/05/06/github_activity_menu.html"></div>
                <script type="IN/Share" data-url="http://jdpgrailsdev.github.io/blog/2014/05/06/github_activity_menu.html" data-counter="right"></script>
                <div class="fb-like" data-href="http://jdpgrailsdev.github.io/blog/2014/05/06/github_activity_menu.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

                   <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In an effort to improve my (limited) front-end foo, I decided that I wanted to add a <a href="http://github.com" target="_blank">GitHub</a> activity stream to this blog.  I figured that it would
not be difficult to combine <a href="http://jquery.com" target="_blank">jQuery</a>, <a href="http://getbootstrap.com" target="_blank">Bootstrap</a> and the <a href="https://developer.github.com/v3/" target="_blank">GitHub API</a> to add a widget that would look like a simplified version that you can see
on your own <a href="http://github.com" target="_blank">GitHub</a> page under the <a href="https://github.com/jdpgrailsdev?tab=activity" target="_blank">Public Activity</a> tab on your account.  What follows
is a recounting of how I added the widget that you now see to the left of this article.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ingredients">Ingredients</h3>
<div class="paragraph">
<p>Let&#8217;s start by first listing the specific pieces that I used to create the widget:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://jquery.com" target="_blank">jQuery 1.11.0</a></p>
</li>
<li>
<p><a href="http://getbootstrap.com/components/#panels-list-group" target="_blank">Bootstrap 3.1.1 Panels</a></p>
</li>
<li>
<p><a href="http://fortawesome.github.io/Font-Awesome/" target="_blank">Font Awesome 4.0.3</a></p>
</li>
<li>
<p><a href="https://developer.github.com/v3/activity/events" target="_blank">GitHub Events API</a></p>
</li>
<li>
<p><a href="https://github.com/styleguide/css/7.0" target="_blank">GitHub Octicon</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>My thought process was to use <a href="http://jquery.com" target="_blank">jQuery</a> to perform an AJAX call to the <a href="https://developer.github.com/v3/activity/events" target="_blank">GitHub Events API</a> to get the activity list for my
account.  Upon retrieval, I would append line items to the <a href="http://getbootstrap.com/components/#panels-list-group">Bootstrap 3.1.1 list group panel</a> that I had placed on the left-hand side
of every page on my site.  Finally, I wanted to make use of the <a href="https://github.com/styleguide/css/7.0" target="_blank">GitHub Octicon</a> icon fonts to make have the same icon indicators
that appear on the activity page on my <a href="http://github.com" target="_blank">GitHub</a> account.  Once I had this plan sketched out, the next step was to see about getting the pieces implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pretending_to_be_a_front_end_developer">Pretending to be a front-end developer</h3>
<div class="paragraph">
<p>The first thing that I did was add the example <a href="http://getbootstrap.com/components/#panels-list-group">Bootstrap list group panel</a> to my <code>menu</code> template just to see how it would fit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint html language-html"><code>&lt;div class="panel panel-default"&gt;
  &lt;!-- Default panel contents --&gt;
  &lt;div class="panel-heading"&gt;Panel heading&lt;/div&gt;
  &lt;div class="panel-body"&gt;
    &lt;p&gt;...&lt;/p&gt;
  &lt;/div&gt;

  &lt;!-- List group --&gt;
  &lt;ul class="list-group"&gt;
    &lt;li class="list-group-item"&gt;Cras justo odio&lt;/li&gt;
    &lt;li class="list-group-item"&gt;Dapibus ac facilisis in&lt;/li&gt;
    &lt;li class="list-group-item"&gt;Morbi leo risus&lt;/li&gt;
    &lt;li class="list-group-item"&gt;Porta ac consectetur ac&lt;/li&gt;
    &lt;li class="list-group-item"&gt;Vestibulum at eros&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Right away, I noticed a bunch of formatting issues, mostly related to positioning the panel relative to the menu at the top of the page and the content in the middle of the page.  I quickly
solved the positioning issue by surrounding the panel with a new <code>&lt;div&gt;</code> element and making use of the <a href="http://getbootstrap.com" target="_blank">Bootstrap</a> <code>pull-left</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint html language-html"><code>&lt;div id="activity" class="pull-left"&gt;
    &lt;div class="panel panel-default"&gt;
      &lt;!-- Default panel contents --&gt;
      &lt;div class="panel-heading"&gt;Panel heading&lt;/div&gt;
      &lt;div class="panel-body"&gt;
        &lt;p&gt;...&lt;/p&gt;
      &lt;/div&gt;

      &lt;!-- List group --&gt;
      &lt;ul class="list-group"&gt;
        &lt;li class="list-group-item"&gt;Cras justo odio&lt;/li&gt;
        &lt;li class="list-group-item"&gt;Dapibus ac facilisis in&lt;/li&gt;
        &lt;li class="list-group-item"&gt;Morbi leo risus&lt;/li&gt;
        &lt;li class="list-group-item"&gt;Porta ac consectetur ac&lt;/li&gt;
        &lt;li class="list-group-item"&gt;Vestibulum at eros&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next step was to get the panel to not overlap the menu and to get it to hover a bit off from the left-hand edge of the screen.  To accomplish this, I added a new CSS selector for the
newly added <code>activity</code> ID:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint css language-css"><code>#activity {
  padding-top: 110px;
  padding-left: 20px;
  width: 275px;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>I also decided to use the <code>panel-primary</code> <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>-provided style class to get the widget to be blue, closely matching <a href="http://github.com" target="_blank">GitHub</a>'s color scheme:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint html language-html"><code>&lt;div id="activity" class="pull-left"&gt;
    &lt;div class="panel panel-primary"&gt;
        ...
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It was now time to get rid of the sample content from the example.  My first thought was to start with a spinner to indicate that the panel is attempting to load (as I was going
to use AJAX to get the data) and an empty, unordered list that would be filled by the retrieved data.  I did some searching on the internets and found that <a href="http://getbootstrap.com" target="_blank">Bootstrap</a> has built-in
support for a loading spinner.  With one more line of HTML, I had something that I could work with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint html language-html"><code>&lt;div id="activity" class="pull-left"&gt;
    &lt;div class="panel panel-primary"&gt;
          &lt;!-- Default panel contents --&gt;
          &lt;div class="panel-heading"&gt;
              &lt;a target="_blank" href="http://github.com/jdpgrailsdev?tab=activity"&gt;&lt;i class="fa fa-github"&gt;&lt;/i&gt; My Recent GitHub Activity&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class="panel-body"&gt;
              &lt;i class='icon-spinner icon-spin icon-large'&gt;&lt;/i&gt; Loading...
          &lt;/div&gt;
          &lt;!-- List group --&gt;
          &lt;ul class="list-group"&gt;
          &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, I had my target all set up and ready to receive real data from <a href="http://github.com" target="_blank">GitHub</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_time_for_some_javascript">Time for some JavaScript</h3>
<div class="paragraph">
<p>Now that I had a professional (in my opinion) looking widget, I decided to get to work on writing the JavaScript to get the content from <a href="http://github.com" target="_blank">GitHub</a>.  <a href="http://jquery.com" target="_blank">jQuery</a> has a <a href="http://api.jquery.com/ready/" target="_blank">ready</a>
call back method that is fired when the HTML document is loaded.  By combining this with <a href="http://jquery.com" target="_blank">jQuery</a>'s <a href="https://api.jquery.com/jQuery.get/" target="_blank">get</a> method, I could fire off the
request to the <a href="https://developer.github.com/v3/" target="_blank">GitHub API</a> once the DOM has been loaded, ensuring the HTML that I want to replace will be present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint javascript language-javascript"><code>// Load the GitHub activity widget on the document ready event.
$(document).ready(function() {
    $.get("https://api.github.com/users/jdpgrailsdev/events", function(data) {
        // Remove the "Loading..." place holder.
        $('#wrap &gt; #activity &gt; .panel &gt; .panel-body').remove();

        // Find the activity list from the DOM.
        var activityList = $('#wrap &gt; #activity &gt; .panel &gt; ul');

        // Counter used to determine when we have found the desired number of events for display.
        var count = 0;

        // TODO Handle data returned by GitHub here!

        // If no events were found, display the "No recent activity" message.
        if(count == 0) {
            activityList.append("&lt;li class=\"list-group-item\"&gt;&lt;div&gt;&lt;span class=\"octicon octicon-x\"&gt;&lt;/span&gt;" +
                "&lt;a href=\"https://github.com/jdpgrailsdev?tab=activity\" target=\"_blank\"&gt; No recent activity&lt;/a&gt;&lt;/li&gt;");
        }

        // Add a link to the end of the list to see all of the activity on GitHub.com.
        activityList.append("&lt;li class=\"list-group-item\"&gt;&lt;div&gt;&lt;span class=\"octicon octicon-rss\"&gt;&lt;/span&gt;" +
            "&lt;a href=\"https://github.com/jdpgrailsdev?tab=activity\" target=\"_blank\"&gt; See all activity @ GitHub&lt;/a&gt;&lt;/li&gt;");
    }).fail(function() {
        $('#wrap &gt; #activity &gt; .panel &gt; .panel-body').remove();
        $('#wrap &gt; #activity &gt; .panel &gt; ul').append("&lt;li class=\"list-group-item\"&gt;&lt;span class=\"octicon octicon-alert\"&gt;&lt;/span&gt;GitHub activity could not be retrieved.&lt;/li&gt;");
    });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code example above makes an AJAX request to <a href="http://github.com" target="_blank">GitHub</a> for my account&#8217;s activity.  If the request is successful, the placeholder text is removed from the view and each event is processed
for display.  If a failure occurs, the <code>fail</code> function is invoked, which prints out a nice error message indicating the failure.  The next step was to actually implement the event handling code.
I only wanted to handle a subset of <a href="https://developer.github.com/v3/activity/events/types/" target="_blank">GitHub Event Types</a> exposed by the <a href="https://developer.github.com/v3/" target="_blank">GitHub API</a>, so I decided to explicitly list out the event types that I was looking for.  Below is the code that handles the data returned
by the <a href="https://developer.github.com/v3/" target="_blank">GitHub API</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint javascript language-javascript"><code>// Loop over each retrieved GitHub event and process.
$.each(data, function(i, githubEvent) {
    // The icon font to be displayed with the event.
    var octicon = "";
    // The hyper link to be applied to the displayed event.
    var link = "";
    // The text to be displayed with the event.
    var text = "";

    // Only show 10 events.  Not all types of GitHub events are implemented here.
    // for the full list, see https://developer.github.com/v3/activity/events/types/
    if(count &lt; 10) {
        if(githubEvent.type == 'CommitCommentEvent') {
            octicon = "octicon-comment";
            link = githubEvent.payload.comment.html_url;
            text = "Commented on " + githubEvent.repo.name + "/commit/" + githubEvent.payload.comment.commit_id;
        } else if(githubEvent.type == 'CreateEvent') {
            octicon = "octicon-repo-create";
            link = "http://github.com/" + githubEvent.repo.name;
            text = "Created repository " + githubEvent.repo.name;
        } else if(githubEvent.type == 'ForkEvent') {
            octicon = "octicon-repo-forked";
            link = githubEvent.payload.forkee.html_url;
            text = "Forked repository " + githubEvent.repo.name;
        } else if(githubEvent.type == 'IssuesEvent') {
            octicon = "octicon-issue-" + githubEvent.payload.action;
            link = githubEvent.payload.issue.html_url;
            text = githubEvent.payload.action.capitalize() + " issue " + githubEvent.repo.name
                + "#" + githubEvent.payload.issue.number;
        } else if(githubEvent.type == 'IssueCommentEvent') {
            octicon = "octicon-comment-discussion";
            link = githubEvent.payload.issue.html_url;
            text = "Commented on " + (githubEvent.payload.issue.pull_request.url != null ? "pull request" : "issue") +
                " " + githubEvent.repo.name + "#" + githubEvent.payload.issue.number;
        } else if(githubEvent.type == 'PullRequestEvent') {
            octicon = 'octicon-git-pull-request';
            link = githubEvent.payload.pull_request.html_url;
            text = githubEvent.payload.action.capitalize() + " pull request " + githubEvent.repo.name
                + "#" + githubEvent.payload.number;
        } else if(githubEvent.type == 'PullRequestReviewCommentEvent') {
            octicon = "octicon-comment";
            link = githubEvent.payload.comment.html_url;
            text = "Commented on pull request " + githubEvent.repo.name + "#"
                + extractPullRequestNumber(githubEvent.payload.comment.pull_request_url);
        } else if(githubEvent.type == 'PushEvent' &amp;&amp; !(githubEvent.repo.name == "jdpgrailsdev/blog")) {
            octicon = "octicon-git-commit";
            link = "http://github.com/" + githubEvent.repo.name + "/commit/" + githubEvent.payload.head;
            text = "Pushed to " + normalizeBranch(githubEvent.payload.ref) + " at " + githubEvent.repo.name;
        }

        // If the event is one of the supported types, add a new line item to the HTML panel.
        if(text) {
            var eventDateHtml = createEventDateHtml(githubEvent.created_at);
            activityList.append("&lt;li id=\"" + githubEvent.id + "\" class=\"list-group-item\"&gt;&lt;div&gt;&lt;span class=\"octicon " +
                octicon + "\"&gt;&lt;/span&gt;&lt;a href=\"" + link + "\" target=\"_blank\"&gt; " + text + "&lt;/a&gt;&lt;/div&gt;" + eventDateHtml + "&lt;/li&gt;");
            count++;
        }
    }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code above sets the icon, link and text for each event found in the response, up to the number of events that I want displayed.  Once the data has been computed for a given event,
it is injected into the HTML as a new list item via the <code>append</code> function on the container list.</p>
</div>
</div>
<div class="sect2">
<h3 id="_octicon">Octicon</h3>
<div class="paragraph">
<p>In order to make the widget look and feel just like the activity stream on <a href="http://github.com" target="_blank">GitHub</a>, I decided that I wanted to use the {github_octicon} font icons.  Unfortunately, the CSS for these font icons
does not appear to be publically available from <a href="http://github.com" target="_blank">GitHub</a>.  Luckily, I came across <a href="https://github.com/rummik/octicon" target="_blank">someone</a>, which is a port of the
{github_octicon} font icons to a CSS file that can be included in your web application.  Armed with the CSS files from this port, I was able to make use of the CSS classes listed in the
{github_octicon} style guide in my widget.  In order to not make a network call out to the <a href="http://github.com" target="_blank">GitHub</a> account that hosts the port, I downloaded these files and included them in my web resources.</p>
</div>
</div>
<div class="sect2">
<h3 id="_final_tweaks">Final tweaks</h3>
<div class="paragraph">
<p>After making the changes outlined so far in this post, I thought that I had a pretty solid solution.  However, as soon as I went to look at my site with different resolutions, I noticed that
the widget was not always being displayed correctly.  I needed to find a way to make sure that the widget always stuck to the left-hand side of the page and did not encroach on the content
displayed to the right of the widget.  After playing around with the CSS, I came up with the following solution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint css language-css"><code>#activity {
  padding-top: 110px;
  padding-left: 20px;
  width: 275px;
}

#wrap &gt; #activity &gt; .panel &gt; ul {
  margin-left: 0px;
}

#wrap &gt; #activity &gt; .panel &gt; .panel-heading &gt; a {
    color: #ffffff;
}

#wrap &gt; .container {
  padding-top: 60px;
  padding-left: 30px;
  display: inline-block;		<i class="conum" data-value="1"></i><b>(1)</b>
  width: 70%;			<i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Displays the DIV inline next to the div that contains the <a href="http://github.com" target="_blank">GitHub</a> widget</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Ensures that some space is left for the widget</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you remember from the beginning of the post, the <a href="http://github.com" target="_blank">GitHub</a> widget applies the <code>pull-left</code> class, which ensures that it is left-aligned on the page.  The trick here is to make sure that
the DIV that contains the main content (the blog posts themselves) is aligned side-by-side with the widget.  From the example above, you can see that it now uses the <code>inline-block</code> display
attribute to achieve this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary">Summary</h3>
<div class="paragraph">
<p>I do not claim to be an user interface developer, nor do I play one on TV.  This little side project certainly helped me to get a little bit more familiar with <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, <a href="http://jquery.com" target="_blank">jQuery</a>,
the <a href="https://developer.github.com/v3/" target="_blank">GitHub API</a>, CSS and icon fonts.  I&#8217;m sure that there are improvements that can be made to both the approach and the code.  Hopefully, I will be able to come back to this widget in the
future as my skills in the area of front-end development grow.</p>
</div>
</div></p>
                <p><a href="/blog/2014/05/06/github_activity_menu.html#disqus_thread">Comments</a></p>

                <hr />

                <p>Older posts are available in the <a href="/blog/archive.html">archive</a>.</p>

            </div>
            <div id="push"></div>
        </div>

        <div id="footer">
              <div class="container">
                <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.0-SNAPSHOT</a> | Comments powered by <a href="http://disqus.com">Disqus</a></p>
              </div>
        </div>

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="https://code.jquery.com/jquery.js" type="text/javascript"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="/blog/js/run_prettify.js" type="text/javascript"></script>
        <script src="/blog/js/github_activity.js" type="text/javascript"></script>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jdpearlin'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <script type="text/javascript">
              window.___gcfg = {lang: 'en'};

              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
        </script>
        <script type="text/javascript">
            (function(d, s, id) {
                  var js, fjs = d.getElementsByTagName(s)[0];
                  if (d.getElementById(id)) return;
                  js = d.createElement(s); js.id = id;
                  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
                  fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
        <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
        <script type="text/javascript">
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-47885115-1', 'jdpgrailsdev.github.io');
          ga('send', 'pageview');
        </script>
    </body>
</html>